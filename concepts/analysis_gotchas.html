<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Common Analysis Gotchas - Firefox Data Documentation</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../dtmo.css">
        
        <link rel="stylesheet" href="../mermaid.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="../introduction.html">Firefox Data Documentation</a></li><li class="expanded "><a href="../concepts/reporting_a_problem.html"><strong aria-hidden="true">1.</strong> Reporting a problem</a></li><li class="expanded "><a href="../concepts/terminology.html"><strong aria-hidden="true">2.</strong> Terminology</a></li><li class="expanded "><a href="../concepts/getting_started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/analysis_intro.html"><strong aria-hidden="true">3.1.</strong> Analysis Quick Start</a></li><li class="expanded "><a href="../concepts/choosing_a_dataset.html"><strong aria-hidden="true">3.2.</strong> Choosing a Desktop Dataset</a></li><li class="expanded "><a href="../concepts/choosing_a_dataset_mobile.html"><strong aria-hidden="true">3.3.</strong> Choosing a Mobile Dataset</a></li><li class="expanded "><a href="../tools/stmo.html"><strong aria-hidden="true">3.4.</strong> Intro to STMO</a></li><li class="expanded "><a href="../concepts/analysis_gotchas.html" class="active"><strong aria-hidden="true">3.5.</strong> Common Analysis Gotchas</a></li><li class="expanded "><a href="../concepts/sql_optimization.html"><strong aria-hidden="true">3.6.</strong> Optimizing Queries</a></li><li class="expanded "><a href="../concepts/getting_help.html"><strong aria-hidden="true">3.7.</strong> Getting Help</a></li></ol></li><li class="expanded "><a href="../tools/index.html"><strong aria-hidden="true">4.</strong> Tools</a></li><li><ol class="section"><li class="expanded "><a href="../tools/projects.html"><strong aria-hidden="true">4.1.</strong> Project Glossary</a></li><li class="expanded "><a href="../concepts/pipeline/gcp_data_pipeline.html"><strong aria-hidden="true">4.2.</strong> Overview of Mozilla's Data Pipeline</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/pipeline/http_edge_spec.html"><strong aria-hidden="true">4.2.1.</strong> HTTP Edge Server Specification</a></li><li class="expanded "><a href="../concepts/pipeline/event_pipeline.html"><strong aria-hidden="true">4.2.2.</strong> Event Pipeline Detail</a></li><li class="expanded "><a href="../concepts/pipeline/data_pipeline.html"><strong aria-hidden="true">4.2.3.</strong> Previous AWS Pipeline Overview</a></li><li class="expanded "><a href="../concepts/pipeline/data_pipeline_detail.html"><strong aria-hidden="true">4.2.4.</strong> In-depth AWS Data Pipeline Detail</a></li></ol></li><li class="expanded "><a href="../tools/interfaces.html"><strong aria-hidden="true">4.3.</strong> Analysis Interfaces</a></li><li class="expanded "><a href="../tools/spark.html"><strong aria-hidden="true">4.4.</strong> Custom analysis with Spark</a></li><li class="expanded "><a href="../concepts/sql_style.html"><strong aria-hidden="true">4.5.</strong> SQL Style Guide</a></li><li class="expanded "><a href="../concepts/glean/glean.html"><strong aria-hidden="true">4.6.</strong> Glean overview</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/glean/debug_ping_view.html"><strong aria-hidden="true">4.6.1.</strong> Glean Debug ping viewer</a></li></ol></li><li class="expanded "><a href="../tools/alerts.html"><strong aria-hidden="true">4.7.</strong> Alerts</a></li></ol></li><li class="expanded "><a href="../cookbooks/index.html"><strong aria-hidden="true">5.</strong> Analysis cookbooks</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/bigquery.html"><strong aria-hidden="true">5.1.</strong> Accessing and working with BigQuery</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/bigquery-airflow.html"><strong aria-hidden="true">5.1.1.</strong> Scheduling BigQuery Queries in Airflow</a></li></ol></li><li class="expanded "><a href="../cookbooks/dataset_specific.html"><strong aria-hidden="true">5.2.</strong> Dataset Specific</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/normandy_events.html"><strong aria-hidden="true">5.2.1.</strong> Working with Normandy events</a></li></ol></li><li class="expanded "><a href="../cookbooks/realtime.html"><strong aria-hidden="true">5.3.</strong> Real-time</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/view_pings_cep.html"><strong aria-hidden="true">5.3.1.</strong> Seeing Your Own Pings</a></li></ol></li><li class="expanded "><a href="../cookbooks/metrics.html"><strong aria-hidden="true">5.4.</strong> Metrics</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/dau.html"><strong aria-hidden="true">5.4.1.</strong> Daily Active Users (DAU)</a></li><li class="expanded "><a href="../cookbooks/active_dau.html"><strong aria-hidden="true">5.4.2.</strong> Active DAU (aDAU)</a></li><li class="expanded "><a href="../cookbooks/retention.html"><strong aria-hidden="true">5.4.3.</strong> Retention</a></li></ol></li></ol></li><li class="expanded "><a href="../datasets/new_data.html"><strong aria-hidden="true">6.</strong> Sending telemetry</a></li><li><ol class="section"><li class="expanded "><a href="../cookbooks/client_guidelines.html"><strong aria-hidden="true">6.1.</strong> Implementing Experiments</a></li><li class="expanded "><a href="../cookbooks/events_best_practices.html"><strong aria-hidden="true">6.2.</strong> Sending Events</a></li><li class="expanded "><a href="../cookbooks/new_ping.html"><strong aria-hidden="true">6.3.</strong> Sending a Custom Ping</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="../datasets/reference.html"><strong aria-hidden="true">7.</strong> Dataset Reference</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/pings.html"><strong aria-hidden="true">7.1.</strong> Pings</a></li><li class="expanded "><a href="../datasets/derived.html"><strong aria-hidden="true">7.2.</strong> Derived Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/active_profiles.html"><strong aria-hidden="true">7.2.1.</strong> Active Profiles</a></li><li class="expanded "><a href="../datasets/batch_view/addons/reference.html"><strong aria-hidden="true">7.2.2.</strong> Addons</a></li><li class="expanded "><a href="../datasets/other/addons_daily/reference.html"><strong aria-hidden="true">7.2.3.</strong> Addons Daily</a></li><li class="expanded "><a href="../datasets/batch_view/clients_daily/reference.html"><strong aria-hidden="true">7.2.4.</strong> Clients Daily</a></li><li class="expanded "><a href="../datasets/bigquery/clients_last_seen/reference.html"><strong aria-hidden="true">7.2.5.</strong> Clients Last Seen</a></li><li class="expanded "><a href="../datasets/batch_view/events/reference.html"><strong aria-hidden="true">7.2.6.</strong> Events</a></li><li class="expanded "><a href="../datasets/bigquery/exact_mau/reference.html"><strong aria-hidden="true">7.2.7.</strong> Exact MAU</a></li><li class="expanded "><a href="../datasets/batch_view/first_shutdown_summary/reference.html"><strong aria-hidden="true">7.2.8.</strong> First Shutdown Summary</a></li><li class="expanded "><a href="../datasets/batch_view/main_summary/reference.html"><strong aria-hidden="true">7.2.9.</strong> Main Summary</a></li><li class="expanded "><a href="../datasets/batch_view/new_profile/reference.html"><strong aria-hidden="true">7.2.10.</strong> New Profile</a></li><li class="expanded "><a href="../datasets/other/socorro_crash/reference.html"><strong aria-hidden="true">7.2.11.</strong> Socorro Crash Reports</a></li><li class="expanded "><a href="../datasets/other/ssl/reference.html"><strong aria-hidden="true">7.2.12.</strong> SSL Ratios (public)</a></li><li class="expanded "><a href="../datasets/batch_view/telemetry_aggregates/reference.html"><strong aria-hidden="true">7.2.13.</strong> Telemetry Aggregates</a></li><li class="expanded "><a href="../datasets/batch_view/update/reference.html"><strong aria-hidden="true">7.2.14.</strong> Update</a></li></ol></li><li class="expanded "><a href="../tools/experiments.html"><strong aria-hidden="true">7.3.</strong> Experimental Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/heartbeat.html"><strong aria-hidden="true">7.3.1.</strong> Accessing Heartbeat data</a></li><li class="expanded "><a href="../datasets/shield.html"><strong aria-hidden="true">7.3.2.</strong> Accessing Shield Study data</a></li></ol></li><li class="expanded "><a href="../datasets/search.html"><strong aria-hidden="true">7.4.</strong> Search Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/search/search_aggregates/reference.html"><strong aria-hidden="true">7.4.1.</strong> Search Aggregates</a></li><li class="expanded "><a href="../datasets/search/search_clients_daily/reference.html"><strong aria-hidden="true">7.4.2.</strong> Search Clients Daily</a></li></ol></li><li class="expanded "><a href="../datasets/other.html"><strong aria-hidden="true">7.5.</strong> Other Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/other/hgpush/reference.html"><strong aria-hidden="true">7.5.1.</strong> hgpush</a></li><li class="expanded "><a href="../datasets/other/stub_installer/reference.html"><strong aria-hidden="true">7.5.2.</strong> Stub installer ping</a></li><li class="expanded "><a href="../datasets/other/activity-stream/reference.html"><strong aria-hidden="true">7.5.3.</strong> Activity Stream</a></li></ol></li><li class="expanded "><a href="../datasets/obsolete.html"><strong aria-hidden="true">7.6.</strong> Obsolete Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/obsolete/churn/reference.html"><strong aria-hidden="true">7.6.1.</strong> Churn</a></li><li class="expanded "><a href="../datasets/obsolete/client_count/reference.html"><strong aria-hidden="true">7.6.2.</strong> Client Count</a></li><li class="expanded "><a href="../datasets/obsolete/client_count_daily/reference.html"><strong aria-hidden="true">7.6.3.</strong> Client Count Daily</a></li><li class="expanded "><a href="../datasets/obsolete/crash_aggregates/reference.html"><strong aria-hidden="true">7.6.4.</strong> Crash Aggregates</a></li><li class="expanded "><a href="../datasets/obsolete/crash_summary/reference.html"><strong aria-hidden="true">7.6.5.</strong> Crash Summary</a></li><li class="expanded "><a href="../datasets/obsolete/error_aggregates/reference.html"><strong aria-hidden="true">7.6.6.</strong> Error Aggregates</a></li><li class="expanded "><a href="../datasets/obsolete/heavy_users/reference.html"><strong aria-hidden="true">7.6.7.</strong> Heavy Users</a></li><li class="expanded "><a href="../datasets/obsolete/longitudinal/reference.html"><strong aria-hidden="true">7.6.8.</strong> Longitudinal</a></li><li class="expanded "><a href="../datasets/obsolete/retention/reference.html"><strong aria-hidden="true">7.6.9.</strong> Retention</a></li><li class="expanded "><a href="../datasets/obsolete/sync_summary/reference.html"><strong aria-hidden="true">7.6.10.</strong> Sync Summary</a></li></ol></li><li class="expanded "><a href="../datasets/fxa.html"><strong aria-hidden="true">7.7.</strong> Firefox Accounts Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../datasets/fxa_metrics/attribution.html"><strong aria-hidden="true">7.7.1.</strong> Firefox Account Attribution</a></li><li class="expanded "><a href="../datasets/fxa_metrics/funnels.html"><strong aria-hidden="true">7.7.2.</strong> Firefox Account Funnel Metrics</a></li><li class="expanded "><a href="../datasets/fxa_metrics/emails.html"><strong aria-hidden="true">7.7.3.</strong> Firefox Account Email Metrics</a></li><li class="spacer"></li></ol></li></ol></li><li class="expanded "><a href="../concepts/index.html"><strong aria-hidden="true">8.</strong> Telemetry Behavior Reference</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/history.html"><strong aria-hidden="true">8.1.</strong> History of Telemetry</a></li><li class="expanded "><a href="../concepts/profile/index.html"><strong aria-hidden="true">8.2.</strong> Profile Behavior</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/profile/profile_creation.html"><strong aria-hidden="true">8.2.1.</strong> Profile Creation</a></li><li class="expanded "><a href="../concepts/profile/realworldusage.html"><strong aria-hidden="true">8.2.2.</strong> Real World Usage</a></li><li class="expanded "><a href="../concepts/profile/profilehistory.html"><strong aria-hidden="true">8.2.3.</strong> Profile History</a></li></ol></li><li class="expanded "><a href="../concepts/channels/index.html"><strong aria-hidden="true">8.3.</strong> Channel Behavior</a></li><li><ol class="section"><li class="expanded "><a href="../concepts/channels/channel_normalization.html"><strong aria-hidden="true">8.3.1.</strong> Channel Normalization and Querying</a></li></ol></li><li class="expanded "><a href="../concepts/censuses.html"><strong aria-hidden="true">8.4.</strong> Census metrics</a></li><li class="expanded "><a href="../concepts/engagement.html"><strong aria-hidden="true">8.5.</strong> Engagement metrics</a></li><li class="expanded "><a href="../concepts/sample_id.html"><strong aria-hidden="true">8.6.</strong> Sampling</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="../meta/index.html"><strong aria-hidden="true">9.</strong> About this Documentation</a></li><li><ol class="section"><li class="expanded "><a href="../meta/contributing.html"><strong aria-hidden="true">9.1.</strong> Contributing</a></li><li class="expanded "><a href="../meta/structure.html"><strong aria-hidden="true">9.2.</strong> Structure</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Firefox Data Documentation</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#analysis-gotchas" id="analysis-gotchas">Analysis Gotchas</a></h1>
<p>When performing analysis on any data there are some mistakes that are easy to
make and details that are easy to overlook.
Do you know exactly what question you hope to answer?
Is your sample representative of your population?
Is your result &quot;real&quot;? How precisely can you state your conclusion?</p>
<p>This document is not about those traps.
Instead, it is about quirks and pitfalls specific to <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/index.html">Telemetry</a>.</p>
<h3><a class="header" href="#notable-historic-events" id="notable-historic-events">Notable historic events</a></h3>
<p>When looking at trends, it is helpful to be aware of events from the past
that might impact comparisons with history. Here are a few to keep in mind:</p>
<ul>
<li><strong>December 4 2019</strong> - <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1598815">AWS Ingestion Pipeline decommissioned</a>.
Specifically, the last ping relayed through the AWS machinery had a
timestamp of <code>2019-12-04 22:04:45.912204 UTC</code>.</li>
<li><strong>October 29 2019</strong> - Glean SDK Timing Distribution(s) are reporting buckets
1 nanosecond apart. This is due to a potential rounding bug in Glean SDK
versions less than <code>19.0.0</code>. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1591938">Bug 1591938</a>.</li>
<li><strong>October 23 2019</strong> - <a href="https://docs.google.com/document/d/1gQF-iU3E21SG985Cl2Ius4LoRXduUrNa5In9hafLIqs/edit">Hot-fix shipped through add-ons</a> that
reset the Telemetry endpoint preference back to the default for a large number of users.</li>
<li><strong>September 1 - October 18 2019</strong> - BigQuery Ping tables are
<a href="https://github.com/mozilla-services/cloudops-infra/pull/1491">missing the <code>X-PingSender-Version</code> header information</a>.
This data is available before and after this time period.</li>
<li><strong>May 4 - May 11 2019</strong> - <a href="https://blog.mozilla.org/blog/2019/05/09/what-we-do-when-things-go-wrong/">Telemetry source data deleted</a>.
No source data is available for this period and derived tables may have
missing days or imputed values.
Derived tables that depend on multiple days may have have affected dates
beyond the deletion region.</li>
<li><strong>January 31 2019</strong> - <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1474285">Profile-per-install</a> landed in <code>mozilla-central</code>
and affects how new profiles are created.
See <a href="https://github.com/mozilla/bigquery-etl/issues/212">discussion in <code>bigquery-etl#212</code></a>.</li>
<li><strong>October 25 2018</strong> - many <code>client_id</code>s on Firefox Android were reset to the
same <code>client_id</code>.
For more information see the blameless post-mortem document <a href="https://docs.google.com/document/d/1r1PDQnqhsrPkft0pB46v9uhXGxR_FzK4laKJLGttXdA">here</a>
or <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1501329">Bug 1501329</a>.</li>
<li><strong>November 2017</strong> - Quantum Launch. There was a surge in new profiles and usage.</li>
<li><strong>June 1 and 5, 2016</strong> - <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1482509">Main Summary <code>v4</code> data is missing</a>
for these two days.</li>
<li><strong>March 2016</strong> - Unified Telemetry launched.</li>
</ul>
<h3><a class="header" href="#pseudo-replication" id="pseudo-replication">Pseudo-replication</a></h3>
<p>Telemetry data is a collection of pings.
A single main-ping represents a single subsession.
Some clients have more subsessions than others.</p>
<p>So when you say <a href="https://mzl.la/2q75dbF">&quot;63% of beta 53 has Firefox set as its default browser&quot;</a>,
make sure you specify it is 63% of <em>pings</em>, since it is only around 46% of clients.
(Apparently users with Firefox Beta 53 set as their default browser submit
more main-pings than users who don't).</p>
<h3><a class="header" href="#profiles-vs-users" id="profiles-vs-users">Profiles vs Users</a></h3>
<p>In the section above you'll notice I said &quot;clients&quot; not &quot;users.&quot;
That is because of all the things we're able to count, users isn't one of them.</p>
<p>Users can have multiple Firefox profiles running on the same computer at
the same time (like developers).</p>
<p>Users can have the same Firefox profile running on several computers on
different days of the week (also developers).</p>
<p>The only things we can count are pings and clients.
Clients we can count because we send a <code>client_id</code> with each ping that uniquely
identifies the profile from which it came.
This is generally close enough to our idea of &quot;user&quot; that we can get away with
counting profiles and calling them users, but you may run into some instances
where the distinction matters.</p>
<p>When in doubt, be precise. You're counting <em>clients</em>.</p>
<p><a href="./profile/index.html">This article</a> contains a more thorough treatment of
the concept of &quot;profiles&quot;.</p>
<h3><a class="header" href="#opt-in-vs-opt-out" id="opt-in-vs-opt-out">Opt-in vs Opt-out</a></h3>
<p>We don't collect the same information from everyone.</p>
<p>Every profile that doesn't have Telemetry disabled sends us &quot;opt-out&quot; Telemetry.
This includes:</p>
<ul>
<li>Nearly everything in the <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/environment.html">Environment</a></li>
<li>Some very specific <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/collection/histograms.html">Histograms</a>, <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/collection/scalars.html">Scalars</a>, and <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/collection/events.html">Events</a> that are marked
<code>&quot;releaseChannelCollection&quot;: &quot;opt-out&quot;</code></li>
</ul>
<p>Most probes are &quot;opt-in&quot;: we do not get information from them unless the user
opts into sending us this information.
Users can opt-in in two ways:</p>
<ol>
<li>Using Firefox's Options UI to tick the box that gives us permission</li>
<li>Installing any pre-release version of Firefox</li>
</ol>
<p>The nature of selection bias is such that the population in #1 is useless for analysis.
If you want to encourage users to collect good information for us,
ask them to install Beta:
it's only slightly harder than finding and checking the opt-in check-box in Firefox.</p>
<h3><a class="header" href="#trusting-dates" id="trusting-dates">Trusting Dates</a></h3>
<p>Don't trust client times.</p>
<p>Any timestamp recorded by the user is subject to &quot;clock skew.&quot;
The user's clock can be set (purposefully or accidentally) to any time at all.
The nature of SSL certificates tends to keep this within a certain relatively-accurate window,
because a user who's clock is too far in the past or too far in the future
might confuse certain expiration-date-checking code.</p>
<p>Examples of client times: <code>crashDate</code>, <code>crashTime</code>, <code>meta/Date</code>, <code>sessionStartDate</code>,
<code>subsessionStartDate</code>, <code>profile/creationDate</code></p>
<p>Examples of server times you can trust: <code>submission_timestamp</code>, <code>submission_date</code></p>
<p><em>Note that <code>submission_date</code> does not appear in the <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/common-ping.html">ping documentation</a>
because it is added in post-processing.
It can be found in the <code>meta</code> field of the ping as in the <a href="https://dbc-caf9527b-e073.cloud.databricks.com/#notebook/30598/">Databricks Example</a>.</em></p>
<h3><a class="header" href="#date-formats" id="date-formats">Date Formats</a></h3>
<p>Not all dates and times are created equal.
Most of the dates and times in Telemetry pings are <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>.
Most are full timestamps, though their resolution may differ from being per-second to being per-day.</p>
<p>Then there's <code>profile/creationDate</code> which is just a number of days since epoch (January 1, 1970).
Like <code>17177</code> for the date 2017-01-11.</p>
<p><strong>Tip:</strong> To convert <code>profile/creationDate</code> to a usable date in SQL:
<code>DATE_ADD('day', profile_created, DATE '1970-01-01')</code></p>
<p>In derived datasets ISO dates are sometimes converted to strings in one of
two formats: <code>%Y-%m-%d</code> or <code>%Y%m%d</code>.</p>
<p>The date formats for different rows in <code>main_summary</code> are described on the
<a href="../datasets/batch_view/main_summary/reference.html#time-formats"><code>main_summary</code> reference page</a>.</p>
<p>Build ids look like dates but aren't.
If you take the first eight characters you can use that as a proxy
for the day the build was released.</p>
<p><code>metadata/Date</code> is an HTTP Date header in a <a href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1">RFC 7231</a>-compatible format.</p>
<p><strong>Tip:</strong> To parse <code>metadata/Date</code> to a usable date in SQL:
<code>DATE_PARSE(SUBSTR(client_submission_date, 1, 25), '%a, %d %b %Y %H:%i:%s')</code></p>
<h3><a class="header" href="#delays" id="delays">Delays</a></h3>
<p>Telemetry data takes a while to get into our hands.
The largest data mule in Telemetry is the main-ping.
It is (pending <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1336360">Bug 1336360</a>) sent at the beginning of a client's <em>next</em> Firefox session.
If the user shuts down their Firefox for the weekend,
we won't get their Friday data until Monday morning.</p>
<p>A rule of thumb is data from two days ago is usually fairly representative.</p>
<p>If you'd like to read more about this subject and look at pretty graphs,
there are a series of blog posts <a href="https://chuttenblog.wordpress.com/2017/02/09/data-science-is-hard-client-delays-for-crash-pings/">here</a>, <a href="https://chuttenblog.wordpress.com/2017/07/12/latency-improvements-or-yet-another-satisfying-graph/">here</a> and <a href="https://chuttenblog.wordpress.com/2017/09/12/two-days-or-how-long-until-the-data-is-in/">here</a>.</p>
<h4><a class="header" href="#pingsender" id="pingsender">Pingsender</a></h4>
<p>Pingsender greatly reduces delay in sending pings to Mozilla,
but only some types of pings are sent by Pingsender.
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1310703">Bug 1310703</a> introduced Pingsender for crash pings and was merged in Firefox 54,
which hit release on June 13, 2017.
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1336360">Bug 1336360</a> moved shutdown pings to Pingsender and was merged in Firefox 55,
which hit release on August 8, 2017.
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1374270">Bug 1374270</a> added sending health pings on shutdown via Pingsender and was
merged in Firefox 56, which hit release on Sept 28, 2017.
Other types of pings are not sent with Pingsender.
This is usually okay because Firefox is expected to continue running long
enough to send those pings.</p>
<p>Mobile clients do not have Pingsender,
so they suffer delay as given in <a href="https://sql.telemetry.mozilla.org/queries/49867#134105">this query</a>.</p>
<h3><a class="header" href="#submission-date" id="submission-date">Submission Date</a></h3>
<p><code>submission_date</code> is the server time at which a ping is received from the client.
We use it to partition many of our data sets.</p>
<p>In <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1422892">bug 1422892</a> we decided
to standardize on <code>submission_date</code>.</p>
<p>TL;DR</p>
<ul>
<li>not subject to client clock skew</li>
<li>doesn't require normalization</li>
<li>good for backfill</li>
<li>good for daily processing</li>
<li>and usually good enough</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../tools/stmo.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../concepts/sql_optimization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../tools/stmo.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../concepts/sql_optimization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../mermaid-init.js"></script>
        

        

    </body>
</html>
